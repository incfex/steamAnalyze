<!DOCTYPE html>
<html>
  <head>
  
  </head>
<body>

<p>Get ID by Name:</p>

<p id="demo"></p>

<script>
  /*
const Http = new XMLHttpRequest();
const url="https://api.steampowered.com/IPlayerService/GetRecentlyPlayedGames/v1/?format=json&key=E21C49139E2E4803D1D1D8F1FE679038&steamid=76561198184524546&count=5";
Http.open("GET", url);
//Http.send();


Http.onreadystatechange=function(){
  if(this.readyState==4 && this.status==200){
    console.log(Http.response)
  }
}


//Http.responseType = 'text';

Http.onload = function() {
  console.log(Http.response);
};

Http.onerror = function(error) {
  console.error(error);
};

*/
function createNode(element) {
  return document.createElement(element);
}

function append(parent, el) {
  return parent.appendChild(el);
}

var count = 1;
const ul = document.getElementById('demo');
const appid = 730;
const a_key = "E21C49139E2E4803D1D1D8F1FE679038"
const proxyurl = "https://cors-anywhere.herokuapp.com/";
const url = `https://store.steampowered.com/appreviews/${appid}?key=${a_key}&json=1`;
//const url = "https://api.steampowered.com/IPlayerService/GetRecentlyPlayedGames/v1/?format=json&key=E21C49139E2E4803D1D1D8F1FE679038&steamid=76561198103508238&count=5"; // site that doesnâ€™t send Access-Control-*
fetch(proxyurl + url) // https://cors-anywhere.herokuapp.com/https://example.com

/*
.then(response => response.json())
.then(function(data) {
    console.log(data);
    let games = data.response.games;
    return games.forEach(function(game) {
      //let li = createNode('li'),
      var span = createNode('span');
     // console.log(authors.response.games.name);
      //span.innerHTML = `${game.name}`.concat("<br>");
      span.innerHTML = `${game.name} <br>`;
      append(ul, span);
    })
  })
*/

.then(response => response.json())
.then(function(data) {
    console.log(data);
    let reviews = data.reviews;
    var stat = createNode('div');
    stat.innerText = `Review Score: ${data.query_summary.review_score}`;
    append(ul, stat);
    reviews.forEach(function(review) {
      //let li = createNode('li'),
      var span = createNode('span');
     // console.log(authors.response.games.name);
      //span.innerHTML = `${game.name}`.concat("<br>");
      span.innerHTML = `No.${count}: ${review.review} <br>`;
      count++;
      append(ul, span);
    })
  })

.catch(function(error) {
    console.log(error);
  });
//document.getElementById("demo").innerHTML = response.text;
//Http.send();
</script>

</body>
</html>

